<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ngv | Portfolio</title>
    
    <script>
        window.addEventListener('error', event => {
            if (event.message === 'ResizeObserver loop completed with undelivered notifications.') {
                event.stopImmediatePropagation();
            }
        });
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Space+Grotesk:wght@300;400;600&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="styles.css">
</head>
<body class="antialiased" id="main-body">

    <div id="preload-loader">
        <div id="video-wrapper">
            <video id="intro-video" src="/video/rickroll.mp4" playsinline muted loop></video>
        </div>
        <button id="enter-btn">WELCOME!</button>
    </div>

    <nav class="fixed top-0 left-0 w-full z-50 px-8 py-6 flex justify-between items-center mix-blend-difference text-white opacity-0">
        <div class="text-2xl font-bold brand-font tracking-widest cursor-pointer hover:text-[var(--color-1)] transition-colors magnetic-target">Byngv.space</div>
        <div class="hidden md:flex space-x-8 text-sm font-bold tracking-widest">
            <button onclick="scrollToSection('#home')" class="nav-btn hover:text-[var(--color-2)] transition-colors uppercase magnetic-target">01. Intro</button>
            <button onclick="scrollToSection('#works')" class="nav-btn hover:text-[var(--color-2)] transition-colors uppercase magnetic-target">02. Works</button>
            <button onclick="scrollToSection('#contact')" class="nav-btn hover:text-[var(--color-2)] transition-colors uppercase magnetic-target">03. Connect</button>
        </div>
       <div id="mobile-menu-btn" onclick="toggleMobileMenu()" class="md:hidden text-2xl cursor-pointer z-50 select-none transition-transform active:scale-90">
            ///
        </div>
    </nav>

    <div id="mobile-menu-overlay" class="fixed inset-0 bg-[#050505] z-40 flex flex-col justify-center items-center opacity-0 pointer-events-none">
    <button onclick="mobileNavClick('#home')" class="text-3xl font-bold mb-10 text-white hover:text-[var(--color-1)] brand-font">01. INTRO</button>
    <button onclick="mobileNavClick('#works')" class="text-3xl font-bold mb-10 text-white hover:text-[var(--color-1)] brand-font">02. WORKS</button>
    <button onclick="mobileNavClick('#contact')" class="text-3xl font-bold text-white hover:text-[var(--color-1)] brand-font">03. CONNECT</button>
</div>

    <div id="main-wrapper" class="w-full overflow-x-hidden opacity-0">
        
        <section id="home" class="min-h-screen w-full flex items-center justify-center relative overflow-hidden border-b border-gray-900">
            <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-[var(--color-1)] rounded-full blur-[150px] opacity-20 pointer-events-none animate-pulse" data-speed="0.5"></div>
            <div class="absolute bottom-1/4 right-1/4 w-80 h-80 bg-[var(--color-2)] rounded-full blur-[150px] opacity-20 pointer-events-none" data-speed="0.8"></div>

            <div class="container mx-auto px-6 relative z-10 text-center">
                <div class="overflow-hidden">
                    <p class="text-[var(--color-2)] tracking-[0.5em] text-sm mb-4 reveal-text font-bold">Welcome</p>
                </div>
                
                <h1 class="text-6xl md:text-9xl font-bold leading-tight mb-6">
                    <div class="line-clamp"><span class="reveal-text block glitch-text" data-text="To">To</span></div>
                    <div class="line-clamp"><span class="reveal-text block glitch-text" data-text="Byngv">Byngv</span></div>
                </h1>

                <div class="max-w-xl mx-auto mt-8 overflow-hidden">
                    <p class="text-gray-400 text-lg md:text-xl reveal-text leading-relaxed">
                        
                    </p>
                </div>

                <div class="mt-12 opacity-0 reveal-btn">
                    <button onclick="scrollToSection('#works')" class="magnetic-target inline-block border border-[var(--color-2)] px-8 py-4 text-[var(--color-2)] hover:bg-[var(--color-2)] hover:text-black transition-all duration-300 tracking-widest text-sm font-bold">
                        XEM DỰ ÁN
                    </button>
                </div>
            </div>

            <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 flex flex-col items-center opacity-50 animate-bounce">
                <span class="text-xs tracking-widest mb-2">SCROLL</span>
                <div class="w-[1px] h-12 bg-white"></div>
            </div>
        </section>

        <section id="works" class="min-h-screen w-full py-24 bg-[#080808] relative">
            <div class="container mx-auto px-6">
                <div class="flex flex-col md:flex-row justify-between items-end mb-20 border-b border-gray-800 pb-8">
                    <div>
                        <span class="text-[var(--color-1)] font-mono text-sm">02 / PROJECTS</span>
                        <h2 class="text-5xl md:text-7xl mt-2 glitch-text" data-text="SELECTED WORKS">SELECTED WORKS</h2>
                    </div>
                    <p class="text-gray-500 max-w-md mt-6 md:mt-0 text-right">
                        Completed projects <br>IB me for more details!
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 lg:gap-24">
                    <a href="/discord-bot/discord-bot_lenxuong/" class="project-item group cursor-pointer block">
                        <div class="prism-card w-full h-[60vh] md:h-[70vh] relative mb-6">
                            <img src="https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80&w=2070&auto=format&fit=crop" alt="DISCORD BOT CHƠI" class="w-full h-full object-cover">
                            <div class="absolute bottom-0 left-0 p-8 z-20 translate-y-full group-hover:translate-y-0 transition-transform duration-500">
                                <h3 class="text-4xl font-bold text-white mix-blend-difference">DISCORD BOT CHƠI</h3>
                            </div>
                        </div>
                        <div class="flex justify-between items-center text-gray-400 font-mono text-sm border-t border-gray-800 pt-4">
                            <span>DISCORD BOT DEVELOPMENT / 2024</span>
                            <span>01</span>
                        </div>
                    </a>

                    <a href="/discord-bot/discord-bot_admin/" class="project-item group cursor-pointer md:mt-32 block">
                        <div class="prism-card w-full h-[60vh] md:h-[70vh] relative mb-6">
                            <img src="https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=1964&auto=format&fit=crop" alt="DISCORD BOT ADMIN" class="w-full h-full object-cover">
                            <div class="absolute bottom-0 left-0 p-8 z-20 translate-y-full group-hover:translate-y-0 transition-transform duration-500">
                                <h3 class="text-4xl font-bold text-white mix-blend-difference">DISCORD BOT ADMIN</h3>
                            </div>
                        </div>
                        <div class="flex justify-between items-center text-gray-400 font-mono text-sm border-t border-gray-800 pt-4">
                            <span>DISCORD BOT DEVELOPMENT / 2025</span>
                            <span>02</span>
                        </div>
                    </a>

                    <a href="/tro-choi/game-ban-ngoai-hanh-tinh/" class="project-item group cursor-pointer block">
                        <div class="prism-card w-full h-[50vh] relative mb-6">
                            <img src="https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=2070&auto=format&fit=crop" alt="SPACE DEFENDER ELITE" class="w-full h-full object-cover">
                            <div class="absolute bottom-0 left-0 p-8 z-20 translate-y-full group-hover:translate-y-0 transition-transform duration-500">
                                <h3 class="text-4xl font-bold text-white mix-blend-difference">SPACE DEFENDER ELITE</h3>
                            </div>
                        </div>
                        <div class="flex justify-between items-center text-gray-400 font-mono text-sm border-t border-gray-800 pt-4">
                            <span>GAME DEVELOPMENT / 2025</span>
                            <span>03</span>
                        </div>
                    </a>
                </div>
            </div>
        </section>

        <section id="contact" class="min-h-screen w-full flex flex-col justify-between pt-32 pb-10 px-6 relative overflow-hidden">
                <div class="absolute inset-0 bg-gradient-to-b from-[#050505] to-[#0a0a0a] -z-10"></div>
                <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"></div>

            <div class="container mx-auto h-full flex flex-col justify-center">
                <span class="text-[var(--color-3)] font-mono text-sm mb-4 block">03 / START A PROJECT</span>
                
                <a href="mailto:vothanhngu00@gmail.com" class="magnetic-target group relative block w-fit">
                    <h2 class="text-[12vw] leading-[0.8] font-bold mix-blend-overlay opacity-50 group-hover:opacity-100 transition-opacity duration-500">
                        Ngữ<br>@ngv
                    </h2>
                    <h2 class="text-[12vw] leading-[0.8] font-bold absolute top-0 left-0 text-[var(--color-3)] opacity-0 group-hover:opacity-100 transition-opacity duration-300 pl-2 pointer-events-none mix-blend-difference" style="clip-path: polygon(0 0, 100% 0, 100% 45%, 0 45%);">
                        Ngữ<br>@ngv
                    </h2>
                </a>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-12 mt-24 border-t border-gray-800 pt-12">
                    <div>
                        <h4 class="text-xl font-bold mb-6">LIÊN HỆ</h4>
                        <ul class="space-y-2 text-gray-400 font-mono">
                            <li><span class="text-white">E:</span> vothanhngu00@gmail.com</li>
                            <li><span class="text-white">P:</span> (+84) 353 256 039</li>
                            <li><span class="text-white">A:</span> Tân An, Long An</li>
                        </ul>
                    </div>
                    <div class="flex flex-col justify-end">
                        <p class="text-2xl font-light text-gray-300">
                            "The best way to predict the future is to create it."
                        </p>
                    </div>
                </div>
            </div>

            <footer class="mt-20 flex justify-between items-center text-xs text-gray-600 font-mono uppercase tracking-wider">
                <span>© 2021 Ngv.</span>
                <span>All Rights Reserved.</span>
            </footer>
        </section>
    
    </div>

    <script>
        gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

        const video = document.getElementById('intro-video');
        const enterBtn = document.getElementById('enter-btn');
        const videoWrapper = document.getElementById('video-wrapper');
        const loader = document.getElementById('preload-loader');
        
        let isEnterClicked = false;

        // 1. Hiện nút ngay khi HTML load xong (Không chờ ảnh nặng)
        document.addEventListener("DOMContentLoaded", () => {
             gsap.to(videoWrapper, { opacity: 1, duration: 1 });
             gsap.to(enterBtn, { opacity: 1, duration: 0.5, delay: 0.2 });
        });

        // Fallback: Nếu 3s mà chưa thấy nút thì ép hiện
        setTimeout(() => {
            if(getComputedStyle(enterBtn).opacity == 0) {
                 gsap.to(enterBtn, { opacity: 1, duration: 0.5 });
            }
        }, 3000);

        // Hàm xử lý vào web
        function enterSite() {
            if (isEnterClicked) return;
            isEnterClicked = true;

            // Ẩn nút ngay lập tức để user biết đã nhận lệnh
            gsap.to(enterBtn, { opacity: 0, duration: 0.3 });

            // Thử play video
            const playPromise = video.play();

            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    video.muted = false;
                    // Nếu video chạy được, chờ 5s rồi vào (hoặc hết video)
                    setTimeout(finishPreloader, 5000); 
                }).catch(error => {
                    // Lỗi video (do mobile chặn hoặc mạng lag) -> Vào thẳng web luôn
                    console.log("Video autoplay failed, skipping intro");
                    finishPreloader(); 
                });
            } else {
                finishPreloader();
            }
        }

        // Hỗ trợ cả Click và Touchstart (cho mobile nhạy hơn)
        enterBtn.addEventListener('click', enterSite);
        enterBtn.addEventListener('touchstart', enterSite, {passive: true});

        function finishPreloader() {
             gsap.to(loader, { 
                  yPercent: -100, 
                  duration: 1.2, 
                  ease: "power4.inOut",
                  onComplete: () => {
                      loader.style.display = "none";
                      video.pause(); 
                      initSite();
                  }
              });
        }

        function initSite() {
            gsap.to("#main-wrapper", { opacity: 1, duration: 0.5 });
            gsap.to("nav", { opacity: 1, duration: 0.5 });

            // Home Animations
            const tlHome = gsap.timeline();
            tlHome.from(".reveal-text", {
                y: 100,
                opacity: 0,
                duration: 1.5,
                stagger: 0.2,
                ease: "power4.out"
            })
            .to(".reveal-btn", {
                opacity: 1,
                duration: 1,
                ease: "power2.out"
            }, "-=0.5");

            // Scroll Animations
            const projects = document.querySelectorAll('.project-item');
            projects.forEach((project) => {
                gsap.from(project, {
                    scrollTrigger: {
                        trigger: project,
                        start: "top 85%", // Chỉnh lại trigger sớm hơn cho mobile
                        end: "bottom 20%",
                        toggleActions: "play none none reverse"
                    },
                    y: 50,
                    opacity: 0,
                    duration: 1,
                    ease: "power3.out"
                });
            });

            // Glitch Effect
            gsap.to(".glitch-text", {
                keyframes: [
                    { x: 0, opacity: 1 },
                    { x: -2, opacity: 0.8 },
                    { x: 2, opacity: 1 },
                    { x: 0, opacity: 1 },
                ],
                duration: 0.2,
                repeat: -1,
                repeatDelay: 3,
                ease: "steps(2)"
            });

            initMagneticButtons();
        }

        function initMagneticButtons() {
            // Chỉ kích hoạt Magnetic trên Desktop (tránh lỗi cảm ứng mobile)
            if(window.innerWidth > 1024) {
                const magnets = document.querySelectorAll('.magnetic-target');
                magnets.forEach((magnet) => {
                    magnet.addEventListener('mousemove', (e) => {
                        const bounding = magnet.getBoundingClientRect();
                        const x = e.clientX - bounding.left - bounding.width / 2;
                        const y = e.clientY - bounding.top - bounding.height / 2;
                        gsap.to(magnet, { x: x * 0.3, y: y * 0.3, duration: 0.6, ease: "power3.out" });
                    });
                    magnet.addEventListener('mouseleave', () => {
                        gsap.to(magnet, { x: 0, y: 0, duration: 0.6, ease: "elastic.out(1, 0.3)" });
                    });
                });
            }
        }

        function scrollToSection(id) {
            gsap.to(window, {duration: 1, scrollTo: {y: id, offsetY: 0}, ease: "power3.inOut"});
        }

        // --- MOBILE MENU LOGIC ---
        let isMobileMenuOpen = false;
        const menuOverlay = document.getElementById('mobile-menu-overlay');
        const menuBtn = document.getElementById('mobile-menu-btn');

        function toggleMobileMenu() {
            isMobileMenuOpen = !isMobileMenuOpen;
            if (isMobileMenuOpen) {
                gsap.to(menuOverlay, { opacity: 1, pointerEvents: "auto", duration: 0.5, ease: "power2.out" });
                menuBtn.textContent = "✕"; 
                menuBtn.style.color = "var(--color-1)"; 
                gsap.fromTo("#mobile-menu-overlay button", 
                    { y: 50, opacity: 0 },
                    { y: 0, opacity: 1, duration: 0.5, stagger: 0.1, delay: 0.2 }
                );
            } else {
                gsap.to(menuOverlay, { opacity: 0, pointerEvents: "none", duration: 0.5, ease: "power2.in" });
                menuBtn.textContent = "///"; 
                menuBtn.style.color = "white";
            }
        }

        function mobileNavClick(targetId) {
            toggleMobileMenu(); 
            setTimeout(() => {
                scrollToSection(targetId); 
            }, 500); 
        }
    </script>
</body>
</html>