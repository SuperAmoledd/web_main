<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GSAP ScrollSmoother Demo</title>
    <style>
        /* CSS Reset cơ bản */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #111;
            color: #fff;
            overflow-x: hidden; /* Ẩn thanh cuộn ngang */
        }

        /* BẮT BUỘC: Các class này giúp ScrollSmoother hoạt động đúng */
        #smooth-wrapper {
            overflow: hidden;
            position: fixed;
            height: 100%;
            width: 100%;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }

        #smooth-content {
            overflow: visible;
            width: 100%;
            /* Tùy chọn: Thêm will-change để tối ưu hiệu năng */
            will-change: transform;
        }

        /* Styling cho nội dung demo */
        header.hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(45deg, #2c3e50, #000000);
            position: relative;
            z-index: 10;
        }

        h1 {
            font-size: 5rem;
            text-transform: uppercase;
            letter-spacing: 5px;
            margin-bottom: 20px;
            text-align: center;
        }

        p.subtitle {
            font-size: 1.5rem;
            font-weight: 300;
            color: #aaa;
        }

        .section {
            padding: 100px 20px;
            min-height: 80vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            display: flex;
            gap: 50px;
            align-items: center;
        }

        .text-block {
            flex: 1;
        }

        .image-block {
            flex: 1;
            height: 400px;
            background-size: cover;
            background-position: center;
            border-radius: 20px;
            position: relative;
        }

        .box {
            width: 100%;
            height: 100%;
            background-color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            color: #fff;
            border-radius: 10px;
        }

        /* Màu nền cho các section để dễ phân biệt */
        .bg-dark { background-color: #111; }
        .bg-gray { background-color: #1a1a1a; }
        .bg-accent { background-color: #e74c3c; color: white; }

        .parallax-element {
            font-size: 8rem;
            position: absolute;
            opacity: 0.1;
            font-weight: bold;
            z-index: 0;
            pointer-events: none;
        }
        
        footer {
            height: 300px;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            border-top: 1px solid #333;
        }

        @media (max-width: 768px) {
            h1 { font-size: 3rem; }
            .container { flex-direction: column; }
            .image-block { width: 100%; }
        }
    </style>
</head>
<body>

    <!-- 1. Wrapper bao bên ngoài -->
    <div id="smooth-wrapper">
        <!-- 2. Content chứa nội dung -->
        <div id="smooth-content">
            
            <header class="hero">
                <div data-speed="0.8">
                    <h1>Smooth Scroll</h1>
                    <p class="subtitle">Cuộn siêu mượt với GSAP</p>
                </div>
            </header>

            <section class="section bg-gray">
                <div class="container">
                    <!-- data-speed: Tốc độ cuộn parallax (1 là bình thường, >1 là nhanh, <1 là chậm) -->
                    <!-- data-lag: Độ trễ khi dừng cuộn (tạo cảm giác quán tính) -->
                    <div class="text-block" data-speed="0.9" data-lag="0.2">
                        <h2>Hiệu ứng Parallax</h2>
                        <p style="margin-top: 20px; line-height: 1.6; color: #ccc;">
                            ScrollSmoother cho phép bạn thêm hiệu ứng parallax dễ dàng chỉ bằng cách thêm thuộc tính <code>data-speed</code> vào HTML. Phần văn bản này đang trôi chậm hơn một chút so với tốc độ cuộn trang (speed 0.9).
                        </p>
                    </div>
                    <div class="image-block" style="background-image: url('https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=1000&auto=format&fit=crop');" data-speed="1.1" data-lag="0.5"></div>
                </div>
            </section>

            <section class="section bg-dark" style="overflow: hidden;">
                <!-- Phần tử trang trí trôi nhanh ở nền -->
                <div class="parallax-element" style="left: 10%; top: 20%;" data-speed="2.5">FAST</div>
                <div class="parallax-element" style="right: 10%; bottom: 20%;" data-speed="0.5">SLOW</div>

                <div class="container">
                    <div class="image-block" style="background-image: url('https://images.unsplash.com/photo-1550751827-4bd374c3f58b?q=80&w=1000&auto=format&fit=crop');" data-speed="auto"></div>
                    <div class="text-block" data-speed="1.2">
                        <h2>Mượt mà trên mọi thiết bị</h2>
                        <p style="margin-top: 20px; line-height: 1.6; color: #ccc;">
                            Plugin tự động xử lý việc tính toán lại chiều cao trang khi thay đổi kích thước cửa sổ. Bạn có thể kết hợp với ScrollTrigger để tạo ra các hiệu ứng xuất hiện (reveal) đẹp mắt.
                        </p>
                    </div>
                </div>
            </section>

            <section class="section bg-accent">
                <div data-speed="1.5">
                    <h2 style="font-size: 4rem;">Tốc độ cao!</h2>
                </div>
            </section>

            <footer>
                <p>&copy; 2024 Demo GSAP ScrollSmoother</p>
            </footer>

        </div> <!-- Kết thúc smooth-content -->
    </div> <!-- Kết thúc smooth-wrapper -->

    <!-- PHẦN SCRIPT QUAN TRỌNG -->
    
    <!-- 1. GSAP Core (Bắt buộc) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <!-- 2. ScrollTrigger (Bắt buộc cho ScrollSmoother) -->
    <!-- Khi chạy thật, bạn đổi src thành đường dẫn file local: src="ScrollTrigger.js" -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <!-- 3. ScrollSmoother (Plugin Premium) -->
    <!-- LƯU Ý: Link bên dưới là link DÙNG THỬ (chỉ chạy trên codepen/localhost/demo). 
         Khi chạy thật trên máy bạn, hãy đổi src thành: src="ScrollSmoother.min.js" -->
    <script src="https://assets.codepen.io/16327/ScrollSmoother.min.js"></script>

    <!-- 4. Khởi tạo -->
    <script>
        // Đăng ký Plugin
        gsap.registerPlugin(ScrollTrigger, ScrollSmoother);

        // Tạo hiệu ứng
        // Bạn có thể lưu instance vào biến 'smoother' để dùng các phương thức như smoother.scrollTo() sau này
        const smoother = ScrollSmoother.create({
            wrapper: "#smooth-wrapper",
            content: "#smooth-content",
            smooth: 1.5,      // Smooth trên PC (số càng lớn càng êm)
            effects: true,    // Bật hiệu ứng parallax
            
            // CẤU HÌNH CHO MOBILE
            smoothTouch: false,   // QUAN TRỌNG: false = Tắt smooth trên thiết bị cảm ứng (dùng native scroll)
            normalizeScroll: false // false = Không can thiệp vào sự kiện cuộn/kéo gốc của trình duyệt
        });
    </script>
</body>
</html>